(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var r=t(1),c=t(16),a=t.n(c),o=t(4),u=t(3),s=t.n(u),i=t(5),d=t(6),l=t.n(d),b="http://localhost:3001/api/persons",f={getAll:function(){var e=Object(i.a)(s.a.mark((function e(){var n,t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.a.get(b),e.next=3,n;case 3:return t=e.sent,e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(i.a)(s.a.mark((function e(n){var t,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.a.post(b,n),e.next=3,t;case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),update:function(){var e=Object(i.a)(s.a.mark((function e(n,t){var r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.a.put("".concat(b,"/").concat(n),t),e.next=3,r;case 3:return c=e.sent,e.abrupt("return",c.data);case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),remove:function(){var e=Object(i.a)(s.a.mark((function e(n){var t,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.a.delete("".concat(b,"/").concat(n)),e.next=3,t;case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},h=t(0),p=function(e){return e.preventDefault()},j=function(e,n){return Object(h.jsxs)("form",{onSubmit:p,children:["Filter shown with:",Object(h.jsx)("input",{value:e,onChange:n})]})},m=function(e,n,t,r,c){return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("form",{onSubmit:e,children:[Object(h.jsxs)("div",{children:["name: ",Object(h.jsx)("input",{value:n,onChange:t})]}),Object(h.jsxs)("div",{children:["number: ",Object(h.jsx)("input",{value:r,onChange:c})]}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{type:"submit",children:"Add"})})]})})},v=function(e,n,t){var r=n.toUpperCase();return e.filter((function(e){return e.name.toUpperCase().includes(r)})).map((function(e){return Object(h.jsxs)("div",{children:[e.name," ",e.number,Object(h.jsx)("button",{onClick:function(){return t(e)},children:"delete"})]},e.name)}))},O={success:{color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},fail:{color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10}},x=function(e,n){return null===e?null:n?Object(h.jsx)("div",{className:"success",style:O.success,children:e}):Object(h.jsx)("div",{className:"success",style:O.fail,children:e})},g=function(){var e=Object(r.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1],a=Object(r.useState)(""),u=Object(o.a)(a,2),s=u[0],i=u[1],d=Object(r.useState)(""),l=Object(o.a)(d,2),b=l[0],p=l[1],O=Object(r.useState)(""),g=Object(o.a)(O,2),y=g[0],w=g[1],k=Object(r.useState)(null),S=Object(o.a)(k,2),U=S[0],C=S[1],A=Object(r.useState)(null),D=Object(o.a)(A,2),N=D[0],B=D[1],P=function(){f.getAll().then((function(e){c(e)})).catch((function(e){return R("Data search unsuccesful",!1)}))};Object(r.useEffect)(P,[]);var R=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];C(e),B(n),setTimeout((function(){C(null),B(null)}),8e3)};return Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{children:"Phonebook"}),Object(h.jsx)("div",{children:x(U,N)}),j(y,(function(e){w(e.target.value)})),Object(h.jsx)("h2",{children:"Add a new"}),m((function(e){e.preventDefault();var n={name:s,number:b};if(t.some((function(e){return e.name===s}))){var r=t.find((function(e){return e.name===s})),a=Object.assign(r,n);window.confirm("Do you want to update ".concat(s," with number ").concat(b,"?"))&&f.update(r.id,n).then((function(){c(t.map((function(e){return e.name===s?a:e}))),i(""),p(""),R("User ".concat(s," phone number has been updated"))})).catch((function(e){R("Update unsuccesful. User ".concat(s," has already been removed from the phonebook."),!1),c(t.filter((function(e){return e.name!==s})))}))}else t.some((function(e){return e.number===b}))?R("Number ".concat(b," has already been added to the phonebook ."),!1):""===s||""===b?R("Name and number cannot be empty",!1):(f.create(n).then((function(e){c(t.concat(e)),i(""),p(""),R("User ".concat(s," has already been added to the phonbook"))})).catch((function(e){return R("Adding number unsuccesful. More info about error: ".concat(e.response.data.error),!1)})),P())}),s,(function(e){i(e.target.value)}),b,(function(e){p(e.target.value)})),Object(h.jsx)("h2",{children:"Numbers"}),v(t,y,(function(e){window.confirm("Remove ".concat(e.name,"?"))&&f.remove(e.id).then((function(){c(t.filter((function(n){return n.id!==e.id}))),R("User ".concat(e.name," has already been deleted from the Phonebook"))})).catch((function(n){R("Deleting unsuccesful. User ".concat(e.name," has already been deleted from the Phonebook."),!1),console.log("id already removed (or other problem)"),P()}))}))]})};t(41);a.a.render(Object(h.jsx)(g,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.c34676a2.chunk.js.map